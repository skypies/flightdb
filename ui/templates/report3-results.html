{{define "report3-results"}}

<html>
  {{template "header"}}
  <body>

    <script type="text/javascript">
      {{template "js-checkboxes"}}
    </script>
    
    <div class="allstack">
      <h1>Report results: {{len .R.RowsHTML}} flights</h1><br/>

      <p>Report: <b>{{.R.DescriptionText}}</b></p>
      
      <div class="box">
        <table>
          {{range .Metadata}}<tr>
          <td>{{index . 0}} : </td><td><b>{{index . 1}}</b></td>
          </tr>{{end}}
        </table>
      </div>
      <p/>

      <p>{{.PostButtons}}</p>

      <div class="box">
        {{.VisualizationFormTag}}
        <table>
          <tr><td colspan="10">
              <button type="submit" name="viewtype" value="vector" class="btn-link">VectorMap</button>
              [noFurn:<input type="checkbox" name="nofurniture"/>;
              colorBy:<select name="colorby">
                <option value="source">DataSource</option>
                <option value="altitude" selected="1">Altitude</option>
                <option value="angle">AngleOfInclination</option>
                <option value="complaints">#Complaints</option>
                <option value="totalcomplaints">Total#Complaints</option>
              </select>;
              lineOpacity:<input type="text" name="maplineopacity" size="4" value="0.6"/>,
              maxFlights:<input type="text" name="maxflights" size="4" value="1000"/>]
              <br/>
              <button type="submit" name="viewtype" value="descent" class="btn-link">AltitudeGraph</button>
              [<input type="text" name="length" size="3" value="100"/>NM by
              <input type="text" name="alt" size="5" value="30000"/>ft;
              showAccel:<input type="checkbox" name="showaccelerations"/>;
              showAngle:<input type="checkbox" name="showangleofinclination"/>;
              avgWin:<input size="4" type="text" name="averagingwindow" value="0s"/>
              sampleRate:<input size="4" type="text" name="sample" value="15s"/>
              dest:<input size="5" type="text" name="airportdest" value="KSFO"/>
              asDepartures:<input type="checkbox" name="asdepartures"/>,
              maxFlights:<input type="text" name="maxflights" size="4" value="1000"/>]
          </td></tr>
          <tr><td colspan="8">
              <b>Checkboxes</b>:[
              <button type="button" onClick="clearNamedCheckboxes('idspec')">clear</button>,
              <button type="button" onClick="setNamedCheckboxes('idspec')">set</button>,
              <button type="button" onClick="toggleNamedCheckboxes('idspec')">toggle</button>]
          </td></tr>
        {{range .R.RowsHTML}}
        <tr>
          {{range . }}<td>{{.}}</td>{{end}}
        </tr>{{end}}
        </table>
        </form>
      </div>

      <div style="text-align:left">
      <p>DEBUG:<a target="_blank" href="localhost:8080/fdb/snarf?idspec={{.IdSpecs}}">snarf
      to a local flightdb2/ui</a></p>
      <p><pre>{{.OptStr}}</pre></p>
      <p><pre>{{.R.Log}}</pre></p>
      </div>
      
      <div class="stack">
        <h3>Notes</h3>
        {{if .R.UserEmail}}
        <p>User <code>{{.R.UserEmail}}</code>
          {{if .R.CanSeeFOIA}} (can see FOIA data) {{end}}
        </p>
        {{end}}
      </div>
    </div>
  </body>
</html>

{{end}}
