{{define "report3-results"}}

<html>
  {{template "header"}}
  <body>

    <script type="text/javascript">
      {{template "js-checkboxes"}}
    </script>
    
    <div class="allstack">
      <h1>Report {{.R.Name}}: {{.R.Start.Format "Mon 2006/01/02"}} - {{.R.End.Format "Mon 2006/01/02"}}, 
        {{len .R.RowsHTML}} flights</h1><br/>

      <div class="box">
        <table>
          {{range .Metadata}}<tr>
          <td>{{index . 0}} : </td><td><b>{{index . 1}}</b></td>
          </tr>{{end}}
        </table>
      </div>
      <p/>

      <p>{{.PostButtons}}</p>

      <div class="box">
        {{.VisualizationFormTag}}
        <table>
          <tr><td colspan="4">
              <b>Checkboxes</b>:[
              <button type="button" onClick="clearNamedCheckboxes('idspec')">clear</button>,
              <button type="button" onClick="setNamedCheckboxes('idspec')">set</button>,
              <button type="button" onClick="toggleNamedCheckboxes('idspec')">toggle</button>]

              <b>Visualize selected as</b>:[
             <button type="submit" name="viewtype" value="vector" class="btn-link">VectorMap</button>,
              <button type="submit" name="viewtype" value="descent" class="btn-link">DescentGraph</button><!--, 
              <button type="submit" name="viewtype" value="track" class="btn-link">TrackPoints</button>-->].
        </td></tr>
        {{range .R.RowsHTML}}
        <tr>
          {{range . }}<td>{{.}}</td>{{end}}
        </tr>{{end}}
        </table>
        </form>
      </div>

      <div style="text-align:left">
      <p>DEBUG:<a target="_blank" href="localhost:8080/fdb/snarf?idspec={{.IdSpecs}}">snarf
      to a local flightdb2/ui</a></p>
      <p><pre>{{.OptStr}}</pre></p>
      <p><pre>{{.R.Log}}</pre></p>
      </div>
      
      <div class="stack">
        <h3>Notes</h3>
        {{if .R.UserEmail}}
        <p>User <code>{{.R.UserEmail}}</code>
          {{if .R.CanSeeFOIA}} (can see FOIA data) {{end}}
        </p>
        {{end}}
      </div>
    </div>
  </body>
</html>

{{end}}
